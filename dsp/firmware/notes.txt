######### TIMERS ##############
TIM2 is reserved for ST LLD
ADC can trigger off: TIM2, TIM3, TIM8
Encoder is hooked into TIM2 and TIM5
DAC can trigger off: TIM6 TIM8 TIM7 TIM5 TIM2 TIM4

So run encoder on TIM5
Run ADC on TIM3 (fx) and TIM8 (inst)
Run DAC off TIM8 (shared with inst ADC)

######### ADCs #############
Use ADC1 and ADC2 for inst and fx respectively

######### DACs #############
Use DAC1

######### Samples ############
Both ADC and DACs should be using right-aligned 12-bit samples in 16-bit
registers.

########## Buffers ###########
For the instrument DSP we need three buffers: ADC, crunch, DAC
At any time, the ADC buffer is being overwritten by the ADC and the DAC buffer
is being read by by the DAC.  Meanwhile we can perform effects in-place on the
crunch buffer.

When our callback fires the ADC/DAC are at the end of their buffers and we need
to rotate: we copy the contents of the crunch buffer to the DAC buffer and the
ADC buffer to the crunch buffer.  We either need to do both of these copies
quickly enough to be finished before the next ADC/DAC samples, or just rotate
the buffer pointers instead of the contents.

####### Peripherals ########
OLED is on SPI2
